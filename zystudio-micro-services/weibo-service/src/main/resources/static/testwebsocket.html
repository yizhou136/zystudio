<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Socket.IO  —  Download v1.4.5</title>
</head>
<body>
<noscript>你的浏览器不支持WebSocket</noscript>
<div>
    <div>
        <button id="connect" onclick="connect()">连接</button>
        <button id="disconnect" onclick="connect()">关闭连接2</button>
    </div>

    <div id="conversationDiv">
        <input type="text" id="name" />
        <button id="sendName" onclick="sayMarco();" >发送2</button>
        <p id="response"></p>
    </div>
</div>
<script type="text/javascript">
    var url = "ws://"+window.location.host+"/mywebsocket";
    var sock = new WebSocket(url);
    sock.onopen = function(){
        console.log("Opening");
        sayMarco();
    }
    sock.onmessage = function(e){
        console.log("Received message: ", e.data);
        setTimeout(function(){sayMarco();}, 2000);
    }

    sock.onclose = function(){
        console.log("Closing");
    }

    console.info(sock);
    function sayMarco(){
        console.log("Sending Marco!");
        sock.send("Marco!");
    }
</script>
</body>
</html>